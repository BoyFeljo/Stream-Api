<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stream Lite</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
  *{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
  body{background:#0b0b0b;color:#fff;min-height:100vh;padding:20px;}
  header{text-align:center;margin-bottom:20px;}
  header h1{font-size:2rem;background:linear-gradient(90deg,#ff004c,#ffa500);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
  .category{margin:30px 0;}
  .category h2{font-size:1.4rem;margin-bottom:10px;color:#ffcc00;border-left:4px solid #ff004c;padding-left:10px;}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:15px;}
  .card{background:rgba(255,255,255,0.05);border-radius:15px;overflow:hidden;transition:all 0.3s ease;cursor:pointer;box-shadow:0 0 10px rgba(255,255,255,0.1);}
  .card:hover{transform:translateY(-5px);box-shadow:0 0 15px rgba(255,255,255,0.3);}
  .card img{width:100%;height:100px;object-fit:cover;}
  .card h3{font-size:0.9rem;padding:10px;text-align:center;}
  footer{text-align:center;margin-top:40px;font-size:0.8rem;color:#888;}
  footer span{color:#ff004c;}
</style>
</head>
<body>
<header>
  <h1>üì∫ Stream Lite</h1>
  <p>Assista canais ao vivo, organizado por categoria</p>
</header>
<div id="content"></div>
<footer>Feito com üíñ por <span>Boy Feljo</span></footer>

<script>
const apiUrl = "/api/proxy"; // chama o proxy

async function loadChannels() {
  try {
    const res = await fetch(apiUrl);
    const data = await res.json();
    renderChannels(data);
  } catch (err) {
    document.getElementById("content").innerHTML = "<p style='color:red;text-align:center;'>‚ùå Falha ao carregar JSON</p>";
    console.error("Erro ao carregar JSON:", err);
  }
}

function renderChannels(channels) {
  const container = document.getElementById("content");
  container.innerHTML = "";
  const groups = {};
  channels.forEach(ch => {
    const group = ch.group || 'Outros';
    if (!groups[group]) groups[group] = [];
    groups[group].push(ch);
  });

  for (const group in groups) {
    const section = document.createElement("div");
    section.className = "category";
    section.innerHTML = `<h2>${group}</h2>`;
    const grid = document.createElement("div");
    grid.className = "grid";
    groups[group].forEach(ch => {
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <img src="${ch.logo || 'https://via.placeholder.com/150'}" alt="${ch.name}">
        <h3>${ch.name}</h3>`;
      card.onclick = () => window.open(ch.url, "_blank");
      grid.appendChild(card);
    });
    section.appendChild(grid);
    container.appendChild(section);
  }
}

loadChannels();
</script>
</body>
</html>
